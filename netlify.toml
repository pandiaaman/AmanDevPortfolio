[build]
  publish = "build"
  command = "npm run build"

[build.environment]
  NODE_VERSION = "18"
  NPM_VERSION = "9"

[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

# Image CDN configuration
[images]
  remote_images = [
    "https://i.imgur.com/.*",
    "https://upload.wikimedia.org/.*",
    "https://raw.githubusercontent.com/.*",
    "https://www.vectorlogo.zone/.*",
    "https://cdn-icons-png.flaticon.com/.*",
    "https://cdn.iconscout.com/.*",
    "https://freesvg.org/.*",
    "https://toppng.com/.*",
    "https://download.logo.wine/.*",
    "https://encrypted-tbn0.gstatic.com/.*",
    "https://d33wubrfki0l68.cloudfront.net/.*",
    "https://static-00.iconduck.com/.*",
    "https://www.postgresql.org/.*",
    "https://www.loffler.com/.*",
    "https://images.credly.com/.*",
    "https://d3njjcbhbojbot.cloudfront.net/.*",
    "https://vectorlogoseek.com/.*",
    "https://www.equitybulls.com/.*",
    "https://media.licdn.com/.*",
    "https://aaruush22-bucket.s3.ap-south-1.amazonaws.com/.*",
    "https://p.kindpng.com/.*",
    "https://olympus1.mygreatlearning.com/.*",
    "https://eportfolio.mygreatlearning.com/.*",
    "https://miro.medium.com/.*",
    "https://s3-alpha.figma.com/.*",
    "https://camo.githubusercontent.com/.*",
    "https://e7.pngegg.com/.*",
    "https://github.githubassets.com/.*",
    "https://seeklogo.com/.*",
    "https://www.w3.org/.*"
  ]

# Headers for SEO and performance
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=()"

# Cache static assets
[[headers]]
  for = "/static/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Cache images
[[headers]]
  for = "*.ico"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.jpeg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Sitemap and robots.txt
[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    Content-Type = "application/xml"

[[headers]]
  for = "/robots.txt"
  [headers.values]
    Content-Type = "text/plain"

# Image CDN redirects for optimized images
[[redirects]]
  # Serve full-size optimized images
  from = "/images/full/:file"
  to = "/.netlify/images?url=/images/:file"
  status = 200

[[redirects]]
  # Serve resized images with width parameter
  from = "/images/:width/:file"
  to = "/.netlify/images?url=/images/:file&width=:width"
  status = 200

[[redirects]]
  # Serve optimized images with quality parameter
  from = "/images/optimized/:file"
  to = "/.netlify/images?url=/images/:file&q=80"
  status = 200

[[redirects]]
  # Serve WebP format images
  from = "/images/webp/:file"
  to = "/.netlify/images?url=/images/:file&fm=webp"
  status = 200

[[redirects]]
  # Serve AVIF format images
  from = "/images/avif/:file"
  to = "/.netlify/images?url=/images/:file&fm=avif"
  status = 200

# Redirects for SEO
[[redirects]]
  from = "/aman"
  to = "/"
  status = 301

[[redirects]]
  from = "/pandia"
  to = "/"
  status = 301

[[redirects]]
  from = "/amanpandia"
  to = "/"
  status = 301

[[redirects]]
  from = "/pandiaaman"
  to = "/"
  status = 301

[[redirects]]
  from = "/portfolio"
  to = "/"
  status = 301

[[redirects]]
  from = "/developer"
  to = "/"
  status = 301

# Handle React Router
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
